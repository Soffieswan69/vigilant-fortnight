<!DOCTYPE html>
<html>
  <head>
    <title>Visual searching with the Web Perception Toolkit</title>
    <meta name="description" content="Wouldn&#39;t it be great if users could search your site using their camera?
" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="robots" content="noindex">
    <meta charset="utf-8" />
    <meta content="IE=Edge" http-equiv="X-UA-Compatible" />
    <meta name="full_width" value="true" />
    <link rel="preconnect" href="//www.gstatic.com" crossorigin="" />
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin="" />
    <link rel="preconnect" href="//fonts.googleapis.com" crossorigin="" />
    <link
      rel="stylesheet"
      href="//fonts.googleapis.com/css?family=Google+Sans:400,500|Roboto:400,400italic,500,500italic|Roboto+Condensed:400,700|Roboto+Mono:400,500|Material+Icons"
    />
    <link
      rel="stylesheet"
      href="/all.css"
    />
    <script type="module" src="confboxScript(/site/_includes/lib/app.mjs)"></script>
  </head>
  <body>
    <devsite-header
  ds-is="header"
  no-lower-row=""
  top-row--height="64"
  bottom-row--height="0"
  bottom-tabs--height="0"
  bottom-row--hidden=""
  fixed=""
  style="opacity: 1;"
>
  <div class="devsite-header--inner">
    <div class="devsite-top-logo-row-wrapper-wrapper">
      <div class="devsite-top-logo-row-wrapper">
        <div class="devsite-top-logo-row">
          <button
            type="button"
            id="devsite-hamburger-menu"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Navigation menu button"
            aria-label="Close menu"
          ></button>
          <div class="devsite-product-name-wrapper">
            <a
              href="/"
              class="devsite-site-logo-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Site logo"
            >
              <img
                src="/images/lockup.svg"
                class="devsite-site-logo"
                alt="web.dev"
              />
            </a>
          </div>
          <div class="devsite-top-logo-row-middle">
            <div class="devsite-header-upper-tabs">
              <devsite-tabs ds-is="tabs" class="upper-tabs" connected="">
                <div class="devsite-tabs-wrapper">
                  <tab>
                    <a
                      href="/learn"
                      class="gc-analytics-event"
                      data-category="Site-Wide Custom Events"
                      data-label="Tab: Learn"
                    >
                      Learn
                    </a>
                  </tab>
                  <tab>
                    <a
                      href="/measure"
                      class="gc-analytics-event"
                      data-category="Site-Wide Custom Events"
                      data-label="Tab: Measure"
                    >
                      Measure
                    </a>
                  </tab>
                  <tab>
                    <a
                      href="/blog"
                      class="gc-analytics-event"
                      data-category="Site-Wide Custom Events"
                      data-label="Tab: Blog"
                    >
                      Blog
                    </a>
                  </tab>
                  <tab>
                    <a
                      href="/about"
                      class="gc-analytics-event"
                      data-category="Site-Wide Custom Events"
                      data-label="Tab: About"
                    >
                      About
                    </a>
                  </tab>
                  <tab overflow-tab="" hidden=""
                    ><a
                      href="/fast/use-imagemin-to-compress-images#"
                      class="devsite-icon devsite-icon-arrow-drop-down"
                      >More</a
                    >
                    <div
                      class="devsite-tabs-overflow-menu"
                      scrollbars=""
                      hidden=""
                    ></div
                  ></tab></div
              ></devsite-tabs>
            </div>
            <devsite-search
              ds-is="search"
              enable-search=""
              enable-signin=""
              enable-suggestions=""
              enable-query-completion=""
              enable-product-suggestions=""
              enable-title-suggestions=""
              enable-reference-suggestions=""
              project-path=""
            >
              <form
                class="devsite-search-form"
                action="/results/"
                method="GET"
              >
                <div class="devsite-search-container">
                  <div id="searchbox" class="devsite-searchbox">
                    <input
                      placeholder="Search"
                      type="text"
                      class="devsite-search-field devsite-search-query"
                      name="q"
                      value=""
                      autocomplete="off"
                      aria-label="Search box"
                    />
                    <div
                      class="devsite-search-image material-icons"
                    ></div>
                  </div>
                  <button
                    type="button"
                    search-open=""
                    class="devsite-search-button devsite-header-icon-button button-flat material-icons"
                    aria-label="Open search box"
                  ></button>
                </div>
                <div class="devsite-popout">
                  <div
                    class="devsite-popout-result devsite-suggest-results-container"
                    devsite-hide=""
                    role="menu"
                    aria-haspopup="true"
                  >
                    <div class="devsite-suggest-wrapper">
                      <div class="devsite-suggest-section">
                        <div class="devsite-suggest-header">
                          Suggested searches
                        </div>
                        <devsite-analytics-scope
                          category="Site-Wide Custom Events"
                          label="Search"
                          action="Query Suggestion Click"
                          ds-is="analytics-scope"
                          ><div
                            class="devsite-result-item devsite-nav-label"
                            role="menuitem"
                            index=":0"
                          >
                            <a
                              class="devsite-result-item-link"
                              href="/results/?q=api"
                              ><span class="devsite-suggestion-fragment"
                                ><b></b>a<b></b>p<b></b>i<b></b></span
                            ></a>
                          </div>
                          <devsite-analytics-scope
                            category="Site-Wide Custom Events"
                            label="Search"
                            action="Query Suggestion Click"
                            ds-is="analytics-scope"
                            ><div
                              class="devsite-result-item devsite-nav-label"
                              role="menuitem"
                              index=":1"
                            >
                              <a
                                class="devsite-result-item-link"
                                href="/results/?q=google"
                                ><span class="devsite-suggestion-fragment"
                                  ><b></b>g<b></b>o<b></b>o<b></b>g<b
                                  ></b>l<b></b>e<b></b></span
                              ></a>
                            </div>
                            <devsite-analytics-scope
                              category="Site-Wide Custom Events"
                              label="Search"
                              action="Query Suggestion Click"
                              ds-is="analytics-scope"
                              ><div
                                class="devsite-result-item devsite-nav-label"
                                role="menuitem"
                                index=":2"
                              >
                                <a
                                  class="devsite-result-item-link"
                                  href="/results/?q=developers"
                                  ><span
                                    class="devsite-suggestion-fragment"
                                    ><b></b>d<b></b>e<b></b>v<b></b>e<b
                                    ></b>l<b></b>o<b></b>p<b></b>e<b
                                    ></b>r<b></b>s<b></b></span
                                ></a>
                              </div>
                              <devsite-analytics-scope
                                category="Site-Wide Custom Events"
                                label="Search"
                                action="Query Suggestion Click"
                                ds-is="analytics-scope"
                                ><div
                                  class="devsite-result-item devsite-nav-label"
                                  role="menuitem"
                                  index=":3"
                                >
                                  <a
                                    class="devsite-result-item-link"
                                    href="/results/?q=cloud"
                                    ><span
                                      class="devsite-suggestion-fragment"
                                      ><b></b>c<b></b>l<b></b>o<b></b>u<b
                                      ></b>d<b></b></span
                                  ></a>
                                </div>
                                <devsite-analytics-scope
                                  category="Site-Wide Custom Events"
                                  label="Search"
                                  action="Query Suggestion Click"
                                  ds-is="analytics-scope"
                                  ><div
                                    class="devsite-result-item devsite-nav-label"
                                    role="menuitem"
                                    index=":4"
                                  >
                                    <a
                                      class="devsite-result-item-link"
                                      href="/results/?q=site"
                                      ><span
                                        class="devsite-suggestion-fragment"
                                        ><b></b>s<b></b>i<b></b>t<b
                                        ></b>e<b></b></span
                                    ></a></div></devsite-analytics-scope></devsite-analytics-scope></devsite-analytics-scope></devsite-analytics-scope
                        ></devsite-analytics-scope>
                      </div>
                      <div class="devsite-suggest-footer">
                        <button
                          type="submit"
                          class="button button-white devsite-suggest-all-results"
                        >
                          See all results for ""
                        </button>
                      </div>
                    </div>
                  </div>
                  <div
                    class="devsite-popout-result devsite-history-container"
                    devsite-hide=""
                    role="menu"
                    aria-haspopup="true"
                  ></div>
                </div>
              </form>
              <button
                type="button"
                search-close=""
                class="devsite-search-button devsite-header-icon-button button-flat material-icons"
                aria-label="Close search box"
              ></button>
            </devsite-search>

            <devsite-search-background
              style="opacity: 1;"
            ></devsite-search-background>
          </div>

          <devsite-user
            ds-is="user"
            sign-in-url="https://web.dev/_d/signin?continue=https%3A%2F%2Fweb.dev%2Ffast%2Fuse-imagemin-to-compress-images"
            ><div class="ogb-wrapper ogb-si">
              <a
                href="https://web.dev/_d/signin?continue=https%3A%2F%2Fweb.dev%2Ffast%2Fuse-imagemin-to-compress-images"
                class="devsite-user-signin button devsite-top-button"
              >
                Sign in
              </a>
            </div></devsite-user
          >
        </div>
      </div>
    </div>
    <div
      class="devsite-collapsible-section
      devsite-header-no-lower-tabs
"
    >
      <div class="devsite-header-background"></div>
    </div>
  </div>
</devsite-header>
    <main>
      <div id="content">
        


<div class="guide-landing-page">
  
    <img
  class="w-hero "
  src="/perception-toolkit/hero.png"
  alt="A series of screens shows a phone camera scanning an image and generating a link."
/>
  

  
  <web-actions-controller page="post"></web-actions-controller>
  <div class="w-actions">     <a   class="w-actions__fab w-actions__fab--share"   href="https://twitter.com/share?text=Visual%20searching%20with%20the%20Web%20Perception%20Toolkit&amp;url=https%3A%2F%2Fweb.dev%2Fperception-toolkit%2F"   onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;" >   <span>Share</span> </a>     <a   class="w-actions__fab w-actions__fab--subscribe"   href="https://web.dev/subscribe" >   <span>Subscribe</span> </a>   </div>

  <div class="w-layout-container--narrow w-post-breadcrumbs">
    <ul class="w-breadcrumbs">
  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link w-breadcrumbs__link--left-justify gc-analytics-event"
      data-category="web.dev"
      data-label="post, home breadcrumb"
      data-action="click"
      href="/"
    >
      Home
    </a>
  </li>
  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link gc-analytics-event"
      data-category="web.dev"
      data-label="post, path breadcrumb"
      data-action="click"
      href=/blog
    >
      All articles
    </a>
  </li>
</ul>
  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      <h1 class="w-article-header__headline">Visual searching with the Web Perception Toolkit</h1>
      
        <p class="w-article-header__subhead w-mb--non">
          Easy to use real-world interactivity
        </p>
      

      
        <div class="w-author__published">
          <time>May 7, 2019</time>
          
        </div>
      

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <img
    class="w-author__image "
    src="/images/authors/joemedley.jpg"
    alt="Joe Medley"
  />
  <div class="w-author__info" style="display: flex; flex-direction: column; justify-content: center;">
    <cite class="w-author__name">Joe Medley</cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/medleyjp">Twitter</a>
      </li>
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://github.com/jpmedley">GitHub</a>
      </li>
      
    </ul>
  </div>
</div>
          
        </div>
      
    </header>
    <p>Wouldn't it be great if users could search your site using their camera? Imagine
this. Your site is Razor McShaveyface. Your customers tell you they have trouble
finding the right cartridges for their razor when they reorder. They don't know
the right keywords for your product search. And let's be honest, they probably
never will.</p>
<p>What if they never need to? What if they could point their phone's camera at the
UPC code on package and your site could present them with the right cartridge
and a big red &quot;reorder&quot; button?</p>
<p>Think of other ways you can use a camera on a site. Imagine a site that
supports in-store price checking. Imagine getting information about a museum
exhibit or historical marker. Imagine identifying real-world landmarks in games
like geocaching or scavenger hunts.</p>
<p><a href="https://github.com/GoogleChromeLabs/perception-toolkit">The Web Perception Toolkit</a>
makes these camera-based scenarios possible. In some cases you can even create
an experience without writing code.</p>
<h2 id="how-does-it-work">How does it work? <a class="w-headline-link" href="#how-does-it-work" aria-hidden="true">#</a></h2>
<p>The open-source Web Perception Toolkit helps you add visual search to your
website. It passes a device camera stream through a set of detectors that map
real-world objects, here called &quot;targets&quot;, to content on your site. This mapping is defined
using Structured Data (JSON-LD) on your site. With this data, you can present the right information in a customizable
UI.</p>
<p>I'll show you enough of this to give you a taste of how it works. For a complete
explanation, check out the <a href="https://perceptiontoolkit.dev/getting-started/">Getting
Started</a> guide, the <a href="https://perceptiontoolkit.dev/documentation/">toolkit
reference</a>, the <a href="https://io.perceptiontoolkit.dev/">I/O Sandbox demo</a> and the <a href="https://github.com/GoogleChromeLabs/perception-toolkit/tree/restructure_demo/demo">sample demos</a>.</p>
<h2 id="structured-data">Structured data <a class="w-headline-link" href="#structured-data" aria-hidden="true">#</a></h2>
<p>The toolkit can't find just any target in the camera's view. You must provide it
with linked JSON data for the targets you want it to recognize. This data also
contains information about those targets that will be shown to the user.</p>
<p>The data is all you need to create a user experience like the one in the image
below. If you do nothing else, the Web Perception Toolkit can identify targets,
then show and hide cards based on the information provided in the data. Try this
for yourself using our <a href="https://github.com/GoogleChromeLabs/perception-toolkit/tree/master/demo/artifact-map">artifact-map
demo</a>.</p>
<figure class="w-figure w-figure--center">
  <img class="w-screenshot" src="found-target.png"
       alt="The default interface is available by using just the linked data." class="screenshot"
       width="300">
  <figcaption class="w-figcaption w-figcaption--center">
    <b>Figure 1</b>: The default interface.
  </figcaption>
</figure>
<p>Add data to your site with a JSON linked data file, included using a <code>&lt;script&gt;</code>
tag and the <code>&quot;application/ld+json&quot;</code> MIME type.</p>
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>application/ld+json<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>//path/to/your/sitemap.jsonld<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span></code></pre>
<p>The file itself looks something like this:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token punctuation">[</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token string">"@context"</span><span class="token punctuation">:</span> <span class="token string">"https://schema.googleapis.com/"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"@type"</span><span class="token punctuation">:</span> <span class="token string">"ARArtifact"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"arTarget"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token string">"@type"</span><span class="token punctuation">:</span> <span class="token string">"Barcode"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"012345678912"</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token string">"arContent"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token string">"@type"</span><span class="token punctuation">:</span> <span class="token string">"WebPage"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token string">"url"</span><span class="token punctuation">:</span> <span class="token string">"http://localhost:8080/demo/artifact-map/products/product1.html"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"Product 1"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token string">"description"</span><span class="token punctuation">:</span> <span class="token string">"This is a product with a barcode"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token string">"image"</span><span class="token punctuation">:</span> <span class="token string">"http://localhost:8080/demo/artifact-map/products/product1.png"</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">]</span></span></code></pre>
<h2 id="the-user-experience">The user experience <a class="w-headline-link" href="#the-user-experience" aria-hidden="true">#</a></h2>
<p>What if you want more than the default user experience? The toolkit gives you
livecycle events, Card and Button objects for crafting the user experience
around those events, and an easy way to style the cards. I'm going to show a
little of this with code based losely on our <a href="https://perceptiontoolkit.dev/getting-started/">Getting
Started</a> guide.</p>
<p>The most important lifecycle event is <code>PerceivedResults</code>, which is firedß every
time a target is found. A target can be a real-world object or a marker such as
a bar code or QR code.</p>
<p>The process for responding to this event is the same as for any other event with
an exception alrady alluded to. If you don't implement the event, a user
interface is automatically created using structured data. To override this
behavior start your event handler by calling<code>event.preventDefault()</code>.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onPerceivedResults</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token comment">// preventDefault() to stop default result Card from showing.</span></span><br><span class="highlight-line">  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token comment">// Process the event.</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>PerceptionToolkit<span class="token punctuation">.</span>Events<span class="token punctuation">.</span>PerceivedResults<span class="token punctuation">,</span> onPerceivedResults<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<p>Let's look at the event more closely. The event itself contains arrays of
markers and targets that it has both found and lost. When targets are found in
the world, the even fires and passes found objects in <code>event.found</code>. Similarly,
when targets pass from the camera view the event fires again, passing lost
objects in <code>event.lost</code>. This helps account for hand and marker movements:
cameras not held steadily enough, dropped markers, that kind of thing.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onPerceivedResults</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token comment">// preventDefault() to stop default result Card from showing</span></span><br><span class="highlight-line">  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">const</span> <span class="token punctuation">{</span> found<span class="token punctuation">,</span> lost <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">;</span></mark><br><span class="highlight-line">  <span class="token comment">// Deal with lost and found objects.</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>Next, you show an appropriate card based on what the toolkit found.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onPerceivedResults</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> found<span class="token punctuation">,</span> lost <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">;</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">if</span> <span class="token punctuation">(</span>found<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lost<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token comment">// Object not found.</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token comment">// Show a card with an offer to show the catalog.</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>found<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token comment">// Object found.</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token comment">// Show a card with a reorder button.</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token punctuation">}</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>Adding cards and buttons is simply a matter of instantiating them and appending
them to a parent object. For example:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> <span class="token punctuation">{</span> Card <span class="token punctuation">}</span> <span class="token operator">=</span> PerceptionToolkit<span class="token punctuation">.</span>Elements<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">const</span> card <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Card</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">card<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'Your message here.'</span></span><br><span class="highlight-line">container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span>'</span></code></pre>
<p>Finally, here's what the whole thing looks like. Notice the conveniences I've
added to the user experience. Whether the marker is found or not, I provide
one-click access to what I think is most useful in the circumstances.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onPerceivedResults</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token comment">// preventDefault() to stop default result Card from showing</span></span><br><span class="highlight-line">  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> found<span class="token punctuation">,</span> lost <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> ActionButton<span class="token punctuation">,</span> Card <span class="token punctuation">}</span> <span class="token operator">=</span> PerceptionToolkit<span class="token punctuation">.</span>Elements<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>found<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lost<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token comment">//Make a view catalog button.</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> button <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">ActionButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    button<span class="token punctuation">.</span>label <span class="token operator">=</span> <span class="token string">'View catalog'</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      card<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token comment">//Run code to launch a catalog.</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token comment">//Make a card for the button.</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> card <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Card</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    card<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'We wish we could help, but that\'s not our razor. Would you like to see our catalog?'</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    card<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token comment">//Tell the toolkit it does not keep the card around</span></span><br><span class="highlight-line">    <span class="token comment">// if it finds something it recognizes.</span></span><br><span class="highlight-line">    card<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>notRecognized <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>found<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token comment">//Make a reorder button.</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> button <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActionButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    button<span class="token punctuation">.</span>label <span class="token operator">=</span> <span class="token string">'Reorder'</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    botton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      card<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token comment">//Run code to reorder.</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token keyword">const</span> card <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Card</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    card<span class="token punctuation">.</span>src <span class="token operator">=</span> found<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>content<span class="token punctuation">;</span></span><br><span class="highlight-line">    card<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<h2 id="formatting-cards">Formatting cards <a class="w-headline-link" href="#formatting-cards" aria-hidden="true">#</a></h2>
<p>The Web Perception Toolkit provides built-in formatting for cards and buttons
with the default stylesheet. But you can easily add your own. The provided
<code>Card</code> and <code>ActionButton</code> objects contain <code>style</code> properties (among many others)
that let you put your organizational stamp on the look and feel. To include the
default stylesheet, add a <code>&lt;link&gt;</code> element to your page.</p>
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>//path/to/toolkit/styles/perception-toolkit.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span></code></pre>
<h2 id="conclusion">Conclusion <a class="w-headline-link" href="#conclusion" aria-hidden="true">#</a></h2>
<p>As I said at the top, this is not an exhaustive look at the <a href="https://github.com/GoogleChromeLabs/perception-toolkit">Web Perception
Toolkit</a>. Hopefully it gives
you a sense of how easy it is to add visual searching to a website. Learn more
with the <a href="https://perceptiontoolkit.dev/getting-started/">Getting Started</a> guide
and the <a href="https://github.com/GoogleChromeLabs/perception-toolkit/tree/restructure_demo/demo">sample
demos</a>.
Dig in to the <a href="https://perceptiontoolkit.dev/documentation/">toolkit
documentation</a> to learn what it
can do.</p>


     

    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>May 7, 2019</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/master/src/site/content/en/blog/perception-toolkit/index.md"
      >
        Improve article
      </a>
       
    </div>

    
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back  gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/blog"
  >
    Return to all articles
  </a>
  <a
    class="w-article-navigation__link w-article-navigation__link--forward gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go forward"
    data-action="click"
    href="/hands-on-portals/"
  >
    <div class="w-article-navigation__column">
      <h3 class="w-article-navigation__heading">Next article</h3>
      Hands-on with Portals: seamless navigations on the Web
    </div>
  </a>
</nav>
  

  
  
</div>

      </div>
    </main>
  </body>
</html>