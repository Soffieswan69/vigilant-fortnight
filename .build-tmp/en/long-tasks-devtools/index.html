<!DOCTYPE html>
<html>
  <head>
    <title>Are long JavaScript tasks delaying your Time to Interactive?</title>
    <meta name="description" content="Long Tasks can keep the main thread busy, delaying user interaction. Chrome DevTools can now visualize Long Tasks, making it easier to see tasks to optimize.
" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="robots" content="noindex">
    <meta charset="utf-8" />
    <meta content="IE=Edge" http-equiv="X-UA-Compatible" />
    <meta name="full_width" value="true" />
    <link rel="preconnect" href="//www.gstatic.com" crossorigin="" />
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin="" />
    <link rel="preconnect" href="//fonts.googleapis.com" crossorigin="" />
    <link
      rel="stylesheet"
      href="//fonts.googleapis.com/css?family=Google+Sans:400,500|Roboto:400,400italic,500,500italic|Roboto+Condensed:400,700|Roboto+Mono:400,500|Material+Icons"
    />
    <link
      rel="stylesheet"
      href="/all.css"
    />
    <script type="module" src="confboxScript(/site/_includes/lib/app.mjs)"></script>
  </head>
  <body>
    <devsite-header
  ds-is="header"
  no-lower-row=""
  top-row--height="64"
  bottom-row--height="0"
  bottom-tabs--height="0"
  bottom-row--hidden=""
  fixed=""
  style="opacity: 1;"
>
  <div class="devsite-header--inner">
    <div class="devsite-top-logo-row-wrapper-wrapper">
      <div class="devsite-top-logo-row-wrapper">
        <div class="devsite-top-logo-row">
          <button
            type="button"
            id="devsite-hamburger-menu"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Navigation menu button"
            aria-label="Close menu"
          ></button>
          <div class="devsite-product-name-wrapper">
            <a
              href="/"
              class="devsite-site-logo-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Site logo"
            >
              <img
                src="/images/lockup.svg"
                class="devsite-site-logo"
                alt="web.dev"
              />
            </a>
          </div>
          <div class="devsite-top-logo-row-middle">
            <div class="devsite-header-upper-tabs">
              <devsite-tabs ds-is="tabs" class="upper-tabs" connected="">
                <div class="devsite-tabs-wrapper">
                  <tab>
                    <a
                      href="/learn"
                      class="gc-analytics-event"
                      data-category="Site-Wide Custom Events"
                      data-label="Tab: Learn"
                    >
                      Learn
                    </a>
                  </tab>
                  <tab>
                    <a
                      href="/measure"
                      class="gc-analytics-event"
                      data-category="Site-Wide Custom Events"
                      data-label="Tab: Measure"
                    >
                      Measure
                    </a>
                  </tab>
                  <tab>
                    <a
                      href="/blog"
                      class="gc-analytics-event"
                      data-category="Site-Wide Custom Events"
                      data-label="Tab: Blog"
                    >
                      Blog
                    </a>
                  </tab>
                  <tab>
                    <a
                      href="/about"
                      class="gc-analytics-event"
                      data-category="Site-Wide Custom Events"
                      data-label="Tab: About"
                    >
                      About
                    </a>
                  </tab>
                  <tab overflow-tab="" hidden=""
                    ><a
                      href="/fast/use-imagemin-to-compress-images#"
                      class="devsite-icon devsite-icon-arrow-drop-down"
                      >More</a
                    >
                    <div
                      class="devsite-tabs-overflow-menu"
                      scrollbars=""
                      hidden=""
                    ></div
                  ></tab></div
              ></devsite-tabs>
            </div>
            <devsite-search
              ds-is="search"
              enable-search=""
              enable-signin=""
              enable-suggestions=""
              enable-query-completion=""
              enable-product-suggestions=""
              enable-title-suggestions=""
              enable-reference-suggestions=""
              project-path=""
            >
              <form
                class="devsite-search-form"
                action="/results/"
                method="GET"
              >
                <div class="devsite-search-container">
                  <div id="searchbox" class="devsite-searchbox">
                    <input
                      placeholder="Search"
                      type="text"
                      class="devsite-search-field devsite-search-query"
                      name="q"
                      value=""
                      autocomplete="off"
                      aria-label="Search box"
                    />
                    <div
                      class="devsite-search-image material-icons"
                    ></div>
                  </div>
                  <button
                    type="button"
                    search-open=""
                    class="devsite-search-button devsite-header-icon-button button-flat material-icons"
                    aria-label="Open search box"
                  ></button>
                </div>
                <div class="devsite-popout">
                  <div
                    class="devsite-popout-result devsite-suggest-results-container"
                    devsite-hide=""
                    role="menu"
                    aria-haspopup="true"
                  >
                    <div class="devsite-suggest-wrapper">
                      <div class="devsite-suggest-section">
                        <div class="devsite-suggest-header">
                          Suggested searches
                        </div>
                        <devsite-analytics-scope
                          category="Site-Wide Custom Events"
                          label="Search"
                          action="Query Suggestion Click"
                          ds-is="analytics-scope"
                          ><div
                            class="devsite-result-item devsite-nav-label"
                            role="menuitem"
                            index=":0"
                          >
                            <a
                              class="devsite-result-item-link"
                              href="/results/?q=api"
                              ><span class="devsite-suggestion-fragment"
                                ><b></b>a<b></b>p<b></b>i<b></b></span
                            ></a>
                          </div>
                          <devsite-analytics-scope
                            category="Site-Wide Custom Events"
                            label="Search"
                            action="Query Suggestion Click"
                            ds-is="analytics-scope"
                            ><div
                              class="devsite-result-item devsite-nav-label"
                              role="menuitem"
                              index=":1"
                            >
                              <a
                                class="devsite-result-item-link"
                                href="/results/?q=google"
                                ><span class="devsite-suggestion-fragment"
                                  ><b></b>g<b></b>o<b></b>o<b></b>g<b
                                  ></b>l<b></b>e<b></b></span
                              ></a>
                            </div>
                            <devsite-analytics-scope
                              category="Site-Wide Custom Events"
                              label="Search"
                              action="Query Suggestion Click"
                              ds-is="analytics-scope"
                              ><div
                                class="devsite-result-item devsite-nav-label"
                                role="menuitem"
                                index=":2"
                              >
                                <a
                                  class="devsite-result-item-link"
                                  href="/results/?q=developers"
                                  ><span
                                    class="devsite-suggestion-fragment"
                                    ><b></b>d<b></b>e<b></b>v<b></b>e<b
                                    ></b>l<b></b>o<b></b>p<b></b>e<b
                                    ></b>r<b></b>s<b></b></span
                                ></a>
                              </div>
                              <devsite-analytics-scope
                                category="Site-Wide Custom Events"
                                label="Search"
                                action="Query Suggestion Click"
                                ds-is="analytics-scope"
                                ><div
                                  class="devsite-result-item devsite-nav-label"
                                  role="menuitem"
                                  index=":3"
                                >
                                  <a
                                    class="devsite-result-item-link"
                                    href="/results/?q=cloud"
                                    ><span
                                      class="devsite-suggestion-fragment"
                                      ><b></b>c<b></b>l<b></b>o<b></b>u<b
                                      ></b>d<b></b></span
                                  ></a>
                                </div>
                                <devsite-analytics-scope
                                  category="Site-Wide Custom Events"
                                  label="Search"
                                  action="Query Suggestion Click"
                                  ds-is="analytics-scope"
                                  ><div
                                    class="devsite-result-item devsite-nav-label"
                                    role="menuitem"
                                    index=":4"
                                  >
                                    <a
                                      class="devsite-result-item-link"
                                      href="/results/?q=site"
                                      ><span
                                        class="devsite-suggestion-fragment"
                                        ><b></b>s<b></b>i<b></b>t<b
                                        ></b>e<b></b></span
                                    ></a></div></devsite-analytics-scope></devsite-analytics-scope></devsite-analytics-scope></devsite-analytics-scope
                        ></devsite-analytics-scope>
                      </div>
                      <div class="devsite-suggest-footer">
                        <button
                          type="submit"
                          class="button button-white devsite-suggest-all-results"
                        >
                          See all results for ""
                        </button>
                      </div>
                    </div>
                  </div>
                  <div
                    class="devsite-popout-result devsite-history-container"
                    devsite-hide=""
                    role="menu"
                    aria-haspopup="true"
                  ></div>
                </div>
              </form>
              <button
                type="button"
                search-close=""
                class="devsite-search-button devsite-header-icon-button button-flat material-icons"
                aria-label="Close search box"
              ></button>
            </devsite-search>

            <devsite-search-background
              style="opacity: 1;"
            ></devsite-search-background>
          </div>

          <devsite-user
            ds-is="user"
            sign-in-url="https://web.dev/_d/signin?continue=https%3A%2F%2Fweb.dev%2Ffast%2Fuse-imagemin-to-compress-images"
            ><div class="ogb-wrapper ogb-si">
              <a
                href="https://web.dev/_d/signin?continue=https%3A%2F%2Fweb.dev%2Ffast%2Fuse-imagemin-to-compress-images"
                class="devsite-user-signin button devsite-top-button"
              >
                Sign in
              </a>
            </div></devsite-user
          >
        </div>
      </div>
    </div>
    <div
      class="devsite-collapsible-section
      devsite-header-no-lower-tabs
"
    >
      <div class="devsite-header-background"></div>
    </div>
  </div>
</devsite-header>
    <main>
      <div id="content">
        


<div class="guide-landing-page">
  
    <img
  class="w-hero "
  src="/long-tasks-devtools/long-tasks.jpg"
  alt="An hourglass with sand pouring through it"
/>
  

  
  <web-actions-controller page="post"></web-actions-controller>
  <div class="w-actions">     <a   class="w-actions__fab w-actions__fab--share"   href="https://twitter.com/share?text=Are%20long%20JavaScript%20tasks%20delaying%20your%20Time%20to%20Interactive%3F&amp;url=https%3A%2F%2Fweb.dev%2Flong-tasks-devtools%2F"   onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;" >   <span>Share</span> </a>     <a   class="w-actions__fab w-actions__fab--subscribe"   href="https://web.dev/subscribe" >   <span>Subscribe</span> </a>   </div>

  <div class="w-layout-container--narrow w-post-breadcrumbs">
    <ul class="w-breadcrumbs">
  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link w-breadcrumbs__link--left-justify gc-analytics-event"
      data-category="web.dev"
      data-label="post, home breadcrumb"
      data-action="click"
      href="/"
    >
      Home
    </a>
  </li>
  <li class="w-breadcrumbs__crumb">
    <a
      class="w-breadcrumbs__link gc-analytics-event"
      data-category="web.dev"
      data-label="post, path breadcrumb"
      data-action="click"
      href=/blog
    >
      All articles
    </a>
  </li>
</ul>
  </div>

  <div class="w-layout-container--narrow w-post-content">
    <header class="w-article-header">
      <h1 class="w-article-header__headline">Are long JavaScript tasks delaying your Time to Interactive?</h1>
      
        <p class="w-article-header__subhead w-mb--non">
          Learn to diagnose costly work preventing user interaction.
        </p>
      

      
        <div class="w-author__published">
          <time>May 29, 2019</time>
          
        </div>
      

      
        <div class="w-authors w-mt--xl w-pt--sm">
          
            <div class="w-author">
  <img
    class="w-author__image "
    src="/images/authors/addyosmani.jpg"
    alt="Addy Osmani"
  />
  <div class="w-author__info" style="display: flex; flex-direction: column; justify-content: center;">
    <cite class="w-author__name">Addy Osmani</cite>
    <ul class="w-author__link-list">
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://twitter.com/addyosmani">Twitter</a>
      </li>
      
      <li class="w-author__link-listitem">
        <a class="w-author__link" href="https://glitch.com/@addyosmani">Glitch</a>
      </li>
    </ul>
  </div>
</div>
          
        </div>
      
    </header>
    <p><strong>tl;dr: Long Tasks can keep the main thread busy, delaying user interaction. Chrome DevTools can now visualize Long Tasks, making it easier to see tasks to optimize.</strong></p>
<p>If you use Lighthouse to audit your pages, you may be familiar with <a href="/interactive">Time to Interactive</a> - a metric representing when users can interact with your page and get a response. But did you know Long (JavaScript) Tasks can contribute heavily to a poor TTI?</p>
<p><img
class="w-screenshot" sizes="(max-width: 1400px) 100vw, 1400px"
srcset="
./Are-long0_rq2bce_c_scale_w_200.png 200w,
./Are-long0_rq2bce_c_scale_w_775.png 775w,
./Are-long0_rq2bce_c_scale_w_1239.png 1239w,
./Are-long0_rq2bce_c_scale_w_1400.png 1400w"
src="./Are-long0_rq2bce_c_scale_w_1400.png"
alt="Time to Interactive displayed in the Lighthouse Report"></p>
<h2 id="what-are-long-tasks">What are Long Tasks? <a class="w-headline-link" href="#what-are-long-tasks" aria-hidden="true">#</a></h2>
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/Long_Tasks_API">Long Task</a> is JavaScript code that monopolizes the main thread for extended periods of time, causing the UI to &quot;freeze&quot;.</p>
<p>While a web page is loading, Long Tasks can tie up the main thread and make the page unresponsive to user input even if it looks ready. Clicks and taps often don't work because event listeners, click handlers etc have not yet been attached.</p>
<p>CPU-heavy Long Tasks occur due to complex work that takes longer than 50ms. Why 50ms?<a href="https://developers.google.com/web/fundamentals/performance/rail"> The RAIL model</a> suggests you process user input events in<a href="https://developers.google.com/web/fundamentals/performance/rail#response"> 50ms</a> to ensure a visible response within 100ms. If you don't, the connection between action and reaction is broken.</p>
<h2 id="are-there-long-tasks-in-my-page-that-could-delay-interactivity">Are there Long Tasks in my page that could delay interactivity? <a class="w-headline-link" href="#are-there-long-tasks-in-my-page-that-could-delay-interactivity" aria-hidden="true">#</a></h2>
<p>Until now, you've needed to manually look for &quot;long yellow blocks&quot; of script over 50ms long in<a href="https://developers.google.com/web/tools/chrome-devtools/"> Chrome DevTools</a> or use the<a href="https://calendar.perfplanet.com/2017/tracking-cpu-with-long-tasks-api/"> Long Tasks API</a> to figure out what tasks were delaying interactivity. This could be a little cumbersome.</p>
<p><img
class="w-screenshot" sizes="(max-width: 1400px) 100vw, 1400px"
srcset="
./Are-long1_yp7hwf_c_scale_w_200.png 200w,
./Are-long1_yp7hwf_c_scale_w_349.png 349w,
./Are-long1_yp7hwf_c_scale_w_457.png 457w,
./Are-long1_yp7hwf_c_scale_w_570.png 570w,
./Are-long1_yp7hwf_c_scale_w_670.png 670w,
./Are-long1_yp7hwf_c_scale_w_755.png 755w,
./Are-long1_yp7hwf_c_scale_w_841.png 841w,
./Are-long1_yp7hwf_c_scale_w_919.png 919w,
./Are-long1_yp7hwf_c_scale_w_1000.png 1000w,
./Are-long1_yp7hwf_c_scale_w_1077.png 1077w,
./Are-long1_yp7hwf_c_scale_w_1153.png 1153w,
./Are-long1_yp7hwf_c_scale_w_1220.png 1220w,
./Are-long1_yp7hwf_c_scale_w_1289.png 1289w,
./Are-long1_yp7hwf_c_scale_w_1400.png 1400w"
src="./Are-long1_yp7hwf_c_scale_w_1400.png"
alt="A DevTools Performance panel screenshot showing the differences between short tasks and long tasks"></p>
<p>To help ease your performance auditing workflow, <a href="https://developers.google.com/web/updates/2019/03/devtools#longtasks">DevTools now visualizes Long Tasks</a>. Tasks (shown in gray) have red flags if they are Long Tasks.</p>
<p><img
class="w-screenshot" sizes="(max-width: 1400px) 100vw, 1400px"
srcset="
./Are-long2_momntc_c_scale_w_200.png 200w,
./Are-long2_momntc_c_scale_w_424.png 424w,
./Are-long2_momntc_c_scale_w_600.png 600w,
./Are-long2_momntc_c_scale_w_740.png 740w,
./Are-long2_momntc_c_scale_w_884.png 884w,
./Are-long2_momntc_c_scale_w_1020.png 1020w,
./Are-long2_momntc_c_scale_w_1136.png 1136w,
./Are-long2_momntc_c_scale_w_1254.png 1254w,
./Are-long2_momntc_c_scale_w_1400.png 1400w"
src="./Are-long2_momntc_c_scale_w_1400.png"
alt="DevTools visualizing Long Tasks as gray bars in the Performance Panel with a red flag for long tasks"></p>
<ul>
<li>Record a trace in the <a href="https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/">Performance panel</a> of loading up a web page.</li>
<li>Look for a red flag in the main thread view. You should see tasks are now gray (&quot;Task&quot;).</li>
<li>Hovering over a bar will let you know the duration of the task and if it was considered &quot;long&quot;.</li>
</ul>
<h2 id="what-is-causing-my-long-tasks">What is causing my Long Tasks? <a class="w-headline-link" href="#what-is-causing-my-long-tasks" aria-hidden="true">#</a></h2>
<p>To discover what is causing a long task, select the gray <strong>Task</strong> bar. In the drawer beneath, select <strong>Bottom-Up</strong> and <strong>Group by Activity</strong>. This allows you to see what activities contributed the most (in total) to the task taking so long to complete. Below, it appears to be a costly set of DOM queries.</p>
<p><img
class="w-screenshot" sizes="(max-width: 1400px) 100vw, 1400px"
srcset="
./Are-long3_tfm3wr_c_scale_w_200.png 200w,
./Are-long3_tfm3wr_c_scale_w_394.png 394w,
./Are-long3_tfm3wr_c_scale_w_547.png 547w,
./Are-long3_tfm3wr_c_scale_w_678.png 678w,
./Are-long3_tfm3wr_c_scale_w_786.png 786w,
./Are-long3_tfm3wr_c_scale_w_904.png 904w,
./Are-long3_tfm3wr_c_scale_w_1010.png 1010w,
./Are-long3_tfm3wr_c_scale_w_1109.png 1109w,
./Are-long3_tfm3wr_c_scale_w_1212.png 1212w,
./Are-long3_tfm3wr_c_scale_w_1312.png 1312w,
./Are-long3_tfm3wr_c_scale_w_1400.png 1400w"
src="./Are-long3_tfm3wr_c_scale_w_1400.png"
alt="Selecting a long task (labelled 'Task') in DevTools allows us to drill-down into the activities that were responsible for it."></p>
<h2 id="what-are-common-ways-to-optimize-long-tasks">What are common ways to optimize Long Tasks? <a class="w-headline-link" href="#what-are-common-ways-to-optimize-long-tasks" aria-hidden="true">#</a></h2>
<p>Large scripts are often a major cause of Long Tasks so consider <a href="/reduce-javascript-payloads-with-code-splitting">splitting them up</a>. Also keep an eye on third-party scripts - their Long Tasks can delay primary content from getting interactive.</p>
<p>Break all your work into small chunks (that run in &lt; 50ms) and run these chunks at the right place and time – the right place may even be off the main thread, in a worker. Phil Walton's <a href="https://philipwalton.com/articles/idle-until-urgent/">Idle Until Urgent</a> is a good read on this topic.</p>
<p>Keep your pages responsive. Minimizing Long Tasks is a great way to ensure your users have a delightful experience when they visit your site. For more on Long Tasks, check out <a href="https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics#tracking_long_tasks">User-centric Performance Metrics</a>.</p>


     

    <div class="w-post-github-link w-mt--l w-mb--l">
      <span class="w-mr--sm">
        
        Last updated: <time>May 29, 2019</time>
        
      </span>
      <a
        href="https://github.com/GoogleChrome/web.dev/blob/master/src/site/content/en/blog/long-tasks-devtools/index.md"
      >
        Improve article
      </a>
       
    </div>

    
  </div>

  
    
    <nav class="w-article-navigation">
  <a
    class="w-article-navigation__link w-article-navigation__link--back  gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go back"
    data-action="click"
    href="/blog"
  >
    Return to all articles
  </a>
  <a
    class="w-article-navigation__link w-article-navigation__link--forward gc-analytics-event"
    data-category="web.dev"
    data-label="navigation, go forward"
    data-action="click"
    href="/speed-at-scale/"
  >
    <div class="w-article-navigation__column">
      <h3 class="w-article-navigation__heading">Next article</h3>
      Speed at Scale - What's new in Web Performance?
    </div>
  </a>
</nav>
  

  
  
</div>

      </div>
    </main>
  </body>
</html>